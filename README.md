# Update README for iOS project

# Usage
`go install`

go to iOS project folder and execute `jessica <command> <action> <args>`

## Commands
`jessica help <command>` - Помощь по команде

|Command|Description|
|----|---|
|`hi`|Тестовая команда, которая поприветствует вас|
|`setup`   |Первичная настройка файла конфигурации|
|`readme`   |Создание необходимых файлов и шаблонов для генерации `README.md` файла|
|`struct`   |Конфигурация, создание и описание структуры проекта|
|`generator`   |Генерация файлов для проекта|

# Setup
Первичная конфигурация

Результатом команды являются два файла:
- `~/.jessica.yml` – глобальный файл конфигурации
    - `info_user_name` – Имя пользователя
- `[project_path]/.jessica.yml` – Файл конфигурации проекта
    - `info_company_name` – Имя компании (Для шаблонов)
    - `project_name` – Имя проекта
    - `project_xcodeproj_name` – Имя xcodeproj файла проекта
    - `templates_struct` – Будут ли использоваться шаблоны
    - `structure_use_custom_project_struct` – Используется ли генерация структуры
    - `structure_custom_project_struct` – Структура проекта

# Readme
Поддержка актуальности `README.md` файла

Пока есть недостающие данные – они будут запрашиваться, все последующие вызовы будут просто обновлять файл `README.md` по шаблону

Будут запрошены:
- Версия xcode, с которой проект последний раз собирался
- Версия swift
- Имя проекта (xcodeproj файла)

Будут созданы:
- Файл `Gemfile` с первоначальными зависимостями
- Файл `Podfile` с первоначальными зависимостями
- Файл `.readme.tpl.md` описывающий шаблон резльтирующего файла `README.md`

Переменные используемые при генерации `README.md` из шаблона `.readme.tpl.md`:
- `xcodeVersion` – Версия xcode из файла
- `swiftVersion` – Версия swift из файла
- `gemFileDependencies` – Список зависимостей Gemfile
- `podFileDependencies` – Список зависимостей проекта Podfile
- `projectName` – Имя проекта

При существовании шаблона описывающего структуру проекта `.project_struct.tpl.md`, он подключается в конец файла `.readme.tpl.md`

# Struct
|Action|Description|
|----|---|
|`setup`|Запрос первоначальных настроек|
|`gen`|Генерация|

## setup
Запрашивает первоначальные настройки:
- Будет ли использоваться кастомная структура роекта
- Описывает пример описания этой структуры в файле конфигурации, если она еще не описана, иначе просто выводит описанную в конфиге структуру проекта
- Будут ли использоваться шаблоны

## gen
- Генерация структуры проекта
- Создание шаблона `.project_struct.tpl.md` описания структуры проекта. В шаблоне доступны все теже переменные, что и для `.readme.tpl.md` файла
- Создание папки для шаблонов, если был утвердительный ответ на соответствующий вопрос во время выполнения действия setup

# Generator
|Action|Description|
|----|---|
|`list`|Запрос первоначальных настроек|
|`gen [template name] [module name] [args]`|Генерация|

## list
Находит и выводит список всех доступных шаблонов из папки шаблонов доступных для генерации с помощью действия `gen`

## gen
После указания действия `gen` необходимо указать имя шаблона и имя генерируемого модуля.

Например
```
jessica generator gen repository User --nomock
```

### Описание файла описывающего шаблон
Файл описывающий шаблон должен иметь имя `templates.yml` и находиться в корне папки с файлами шаблона

Доступно 3 секции:
1. `code_files`
1. `test_files`
1. `mock_files`

Каждая секция может содержать список генерируемых файлов. Описание каждого файла содержит:
- `name` – Суффикс генерируемого файла, префиксом будет переданное имя модуля
- `template_path` – путь внутри папки шаблона, относительно файла описывающего шаблон
- `output_path` – выходной путь сгенерированного файла, возможно использование переменных
    - `{{.projectName}}` – Имя проекта из файла конфигурации
    - `{{.projectTestsName}}` – Имя папки с тестами проекта из файла конфигурации
    - `{{.moduleName}}` – Имя модуля, которое было передано при вызове действия

По умолчанию генерируются все секции, `code_files` является обязательной всегда. Другие можно отключить передав `args`:
- `--notest` – для отключения генерации секции `test_files`
- `--nomock` – для отключения генерации секции `mock_files`